<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dcits.ensemble.om.oms.dao.middleware.EcmMidwareRedisintDao">
  <!-- Created by oms on 2016/02/16 10:54:34. -->
  <select id="selectByPrimaryKey" parameterType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint">
    select *
    from ECM_MIDWARE_REDISINT
    where REDISINT_ID = #{redisintId,jdbcType=INTEGER}
  </select>
  <select id="findList" parameterType="com.dcits.galaxy.dal.mybatis.proactor.page.ParameterWrapper" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint">
    select a.*,b.MIDWARE_NAME,b.MIDWARE_PATH,c.SER_IP,d.MIDWARE_VER_NO
    from ECM_MIDWARE_REDISINT  a,ECM_MIDWARE_INFO b,ECM_SERVER_INFO c,ECM_MIDWARE_VER d
    where a.MIDWARE_ID = b.MIDWARE_ID and a.SER_ID = c.SER_ID and b.MIDWARE_VER_ID = d.MIDWARE_VER_ID
     <if test="baseParam.midwareId != null">
      AND  a.MIDWARE_ID=#{baseParam.midwareId,jdbcType=INTEGER}
     </if>
    order by a.REDISINT_NODE_NUM
  </select>
  <select id="findDepList" parameterType="java.util.Map" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint">
  select a.*,b.*,c.*,d.*
  from ECM_MIDWARE_REDISINT  a,ECM_MIDWARE_INFO b,ECM_MIDWARE_VER c, ECM_SERVER_INFO d
  where a.MIDWARE_ID=#{midwareId,jdbcType=INTEGER} and a.MIDWARE_ID=b.MIDWARE_ID and a.SER_ID=d.SER_ID and b.MIDWARE_VER_ID=c.MIDWARE_VER_ID
   </select>

<select id="findRedisMemory" parameterType="java.util.Map" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint">
    select *
    from ECM_MIDWARE_REDISINT
    where
    <if test="midwareId != null">
     MIDWARE_ID=#{midwareId,jdbcType=INTEGER}
    </if>
    <if test="redisintType != null">
    and  REDISINT_TYPE = #{redisintType,jdbcType=VARCHAR}
    </if>
    <if test="redisintNodeNum != null">
     and   REDISINT_NODE_NUM = #{redisintNodeNum,jdbcType=INTEGER}
    </if>
</select>

 <select id="findRedisit" parameterType="java.util.Map" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint">
  select a.*,b.*,c.*,d.*
  from ECM_MIDWARE_REDISINT  a,ECM_MIDWARE_INFO b,ECM_MIDWARE_VER c, ECM_SERVER_INFO d
  where a.REDISINT_ID in (${redisIdList}) and a.MIDWARE_ID=b.MIDWARE_ID and a.SER_ID=d.SER_ID and b.MIDWARE_VER_ID=c.MIDWARE_VER_ID
   </select>
  <select id="findByMid" parameterType="java.util.Map" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint">
    select a.*,b.MIDWARE_NAME,b.MIDWARE_PATH,c.SER_IP,c.SER_ID
    from ECM_MIDWARE_REDISINT  a,ECM_MIDWARE_INFO b,ECM_SERVER_INFO c
    where a.MIDWARE_ID = b.MIDWARE_ID and a.SER_ID = c.SER_ID
     <if test="redisintId != null">
      AND  a.REDISINT_ID=#{redisintId,jdbcType=INTEGER}
     </if>
    order by a.REDISINT_NODE_NUM
  </select>
  <select id="findRedisSerList" parameterType="java.util.Map" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint">
  select a.*,b.*,c.*,d.*
  from ECM_MIDWARE_REDISINT  a,ECM_MIDWARE_INFO b,ECM_MIDWARE_VER c, ECM_SERVER_INFO d
  where a.MIDWARE_ID=#{midwareId,jdbcType=INTEGER} and a.REDISINT_TYPE=#{redisintType,jdbcType=VARCHAR}  and a.MIDWARE_ID=b.MIDWARE_ID and a.SER_ID=d.SER_ID and b.MIDWARE_VER_ID=c.MIDWARE_VER_ID
   order by a.REDISINT_NODE_NUM 
  </select>
   <select id="findRedisNodeList" parameterType="java.util.Map" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint">
  select a.*,b.*,c.*,d.*
  from ECM_MIDWARE_REDISINT  a,ECM_MIDWARE_INFO b,ECM_MIDWARE_VER c, ECM_SERVER_INFO d
  where a.MIDWARE_ID=#{midwareId,jdbcType=INTEGER} and a.REDISINT_NODE_NUM=#{redisintNodeNum,jdbcType=INTEGER}  and a.MIDWARE_ID=b.MIDWARE_ID and a.SER_ID=d.SER_ID and b.MIDWARE_VER_ID=c.MIDWARE_VER_ID
   order by a.REDISINT_NODE_NUM 
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint">
    delete from ECM_MIDWARE_REDISINT
    where REDISINT_ID = #{redisintId,jdbcType=INTEGER}
  </delete>
  <update id="updateByPrimaryKey" parameterType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint">
    update ECM_MIDWARE_REDISINT
    <set>
      <if test="midwareId != null">
        MIDWARE_ID = #{midwareId,jdbcType=INTEGER},
      </if>
      <if test="serId != null">
        SER_ID = #{serId,jdbcType=INTEGER},
      </if>
      <if test="redisintName != null">
        REDISINT_NAME = #{redisintName,jdbcType=VARCHAR},
      </if>
      <if test="redisintDesc != null">
        REDISINT_DESC = #{redisintDesc,jdbcType=VARCHAR},
      </if>
      <if test="redisintStatus != null">
        REDISINT_STATUS = #{redisintStatus,jdbcType=VARCHAR},
      </if>
      <if test="redisintType != null">
        REDISINT_TYPE = #{redisintType,jdbcType=VARCHAR},
      </if>
      <if test="redisintPort != null">
        REDISINT_PORT = #{redisintPort,jdbcType=INTEGER},
      </if>
      <if test="redisintNodeNum != null">
        REDISINT_NODE_NUM = #{redisintNodeNum,jdbcType=INTEGER},
      </if>
      <if test="redisintMemory != null">
        REDISINT_MEMORY = #{redisintMemory,jdbcType=INTEGER}
      </if>
    </set>
    where REDISINT_ID = #{redisintId,jdbcType=INTEGER}
  </update>
  <insert id="insert" parameterType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareRedisint">
    insert into ECM_MIDWARE_REDISINT
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="redisintId != null">
        REDISINT_ID,
      </if>
      <if test="midwareId != null">
        MIDWARE_ID,
      </if>
      <if test="serId != null">
        SER_ID,
      </if>
      <if test="redisintName != null">
        REDISINT_NAME,
      </if>
      <if test="redisintDesc != null">
        REDISINT_DESC,
      </if>
      <if test="redisintStatus != null">
        REDISINT_STATUS,
      </if>
      <if test="redisintType != null">
        REDISINT_TYPE,
      </if>
      <if test="redisintPort != null">
        REDISINT_PORT,
      </if>
      <if test="redisintNodeNum != null">
        REDISINT_NODE_NUM,
      </if>
      <if test="redisintMemory != null">
        REDISINT_MEMORY,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="redisintId != null">
        #{redisintId,jdbcType=INTEGER},
      </if>
      <if test="midwareId != null">
        #{midwareId,jdbcType=INTEGER},
      </if>
      <if test="serId != null">
        #{serId,jdbcType=INTEGER},
      </if>
      <if test="redisintName != null">
        #{redisintName,jdbcType=VARCHAR},
      </if>
      <if test="redisintDesc != null">
        #{redisintDesc,jdbcType=VARCHAR},
      </if>
      <if test="redisintStatus != null">
        #{redisintStatus,jdbcType=VARCHAR},
      </if>
      <if test="redisintType != null">
        #{redisintType,jdbcType=VARCHAR},
      </if>
      <if test="redisintPort != null">
        #{redisintPort,jdbcType=INTEGER},
      </if>
      <if test="redisintNodeNum != null">
        #{redisintNodeNum,jdbcType=INTEGER},
      </if>
      <if test="redisintMemory != null">
        #{redisintMemory,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
</mapper>