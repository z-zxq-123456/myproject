<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dcits.ensemble.om.oms.dao.middleware.EcmMidwareDbintDao">
  <!-- Created by oms on 2016/02/16 10:54:34. -->
  <select id="selectByPrimaryKey" parameterType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareDbint" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareDbint">
    select *
    from ECM_MIDWARE_DBINT
    where DBINT_ID = #{dbintId,jdbcType=INTEGER}
  </select>
  <select id="findList" parameterType="com.dcits.galaxy.dal.mybatis.proactor.page.ParameterWrapper" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareDbint">
    select a.DBINT_ID,a.MIDWARE_ID,a.DBINT_NAME,a.DBINT_DESC,a.DB_TYPE,a.DBINT_NODE_NUM,a.DBINT_USER_NAME,a.DBINT_USER_PWD,
    a.DBINT_PORT,a.DBINT_SERVICE_NAME,a.DBINT_STATUS,b.SER_NAME, b.SER_IP,b.SER_ID,c.MIDWARE_NAME
    from ECM_MIDWARE_DBINT a,ECM_SERVER_INFO b,ECM_MIDWARE_INFO c
    where a.SER_ID=b.SER_ID  and a.MIDWARE_ID=c.MIDWARE_ID 
      <if test="baseParam.midwareId != null">
        AND  a.MIDWARE_ID = #{baseParam.midwareId,jdbcType=VARCHAR}
    </if>
  </select>
  <select id="findByDbId" parameterType="java.util.Map" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareDbint">
    select a.DBINT_ID,a.MIDWARE_ID,a.DBINT_NAME,a.DBINT_DESC,a.DB_TYPE,a.DBINT_NODE_NUM,a.DBINT_USER_NAME,a.DBINT_USER_PWD,
    a.DBINT_PORT,a.DBINT_SERVICE_NAME,b.SER_NAME, b.SER_IP,b.SER_ID,c.MIDWARE_NAME
    from ECM_MIDWARE_DBINT a,ECM_SERVER_INFO b,ECM_MIDWARE_INFO c
    where a.SER_ID=b.SER_ID  and a.MIDWARE_ID=c.MIDWARE_ID and a.DBINT_ID = #{dbintId,jdbcType=INTEGER}
  </select>
  <select id="findByMidwareId" parameterType="java.util.Map" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareDbint">
    select a.DBINT_ID,a.MIDWARE_ID,a.DBINT_NAME,a.DBINT_DESC,a.DB_TYPE,a.DBINT_NODE_NUM,a.DBINT_USER_NAME,a.DBINT_USER_PWD,
    a.DBINT_PORT,a.DBINT_SERVICE_NAME,b.SER_NAME, b.SER_IP,b.SER_ID,c.MIDWARE_NAME
    from ECM_MIDWARE_DBINT a,ECM_SERVER_INFO b,ECM_MIDWARE_INFO c
    where a.SER_ID=b.SER_ID  and a.MIDWARE_ID=c.MIDWARE_ID 
      <if test="midwareId != null">
        AND  a.MIDWARE_ID = #{midwareId,jdbcType=VARCHAR}
    </if>
  </select>
  <select id="findListByMidwareId" parameterType="java.util.Map" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareDbint">
    select a.*,b.SER_NAME, b.SER_IP,b.SER_ID,c.MIDWARE_NAME
    from ECM_MIDWARE_DBINT a,ECM_SERVER_INFO b,ECM_MIDWARE_INFO c
    where a.SER_ID=b.SER_ID  and a.MIDWARE_ID=c.MIDWARE_ID 
    <if test="midwareId != null">
        AND  a.MIDWARE_ID = #{midwareId,jdbcType=VARCHAR}
    </if>
  </select>
  <select id="findListByAppId" parameterType="java.util.Map" resultType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareDbint">
    select a.DBINT_ID,a.MIDWARE_ID,a.SER_ID,a.DBINT_NAME,a.DBINT_DESC,a.DB_TYPE,a.DBINT_NODE_NUM,a.DBINT_USER_NAME,a.DBINT_USER_PWD,
    a.DBINT_PORT,a.DBINT_SERVICE_NAME,b.SER_NAME, b.SER_IP,c.MIDWARE_NAME
    from   ECM_MIDWARE_DBINT  a,ECM_SERVER_INFO b,ECM_MIDWARE_INFO c,ECM_APP_INFO d 
    where  a.SER_ID=b.SER_ID  and a.MIDWARE_ID=c.MIDWARE_ID  and d.MIDWARE_DB_ID = c.MIDWARE_ID   
    AND    d.APP_ID = #{appId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareDbint">
    delete from ECM_MIDWARE_DBINT
    where DBINT_ID = #{dbintId,jdbcType=INTEGER}
  </delete>
  <update id="updateByPrimaryKey" parameterType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareDbint">
    update ECM_MIDWARE_DBINT
    <set>
      <if test="midwareId != null">
        MIDWARE_ID = #{midwareId,jdbcType=INTEGER},
      </if>
      <if test="serId != null">
        SER_ID = #{serId,jdbcType=INTEGER},
      </if>
      <if test="dbintName != null">
        DBINT_NAME = #{dbintName,jdbcType=VARCHAR},
      </if>
      <if test="dbintDesc != null">
        DBINT_DESC = #{dbintDesc,jdbcType=VARCHAR},
      </if>
      <if test="dbintStatus != null">
        DBINT_STATUS = #{dbintStatus,jdbcType=VARCHAR},
      </if>
      <if test="dbType != null">
        DB_TYPE = #{dbType,jdbcType=VARCHAR},
      </if>
      <if test="dbintNodeNum != null">
        DBINT_NODE_NUM = #{dbintNodeNum,jdbcType=INTEGER},
      </if>
      <if test="dbintUserName != null">
        DBINT_USER_NAME = #{dbintUserName,jdbcType=VARCHAR},
      </if>
      <if test="dbintUserPwd != null">
        DBINT_USER_PWD = #{dbintUserPwd,jdbcType=VARCHAR},
      </if>
      <if test="dbintPort != null">
        DBINT_PORT = #{dbintPort,jdbcType=VARCHAR},
      </if>
      <if test="dbintServiceName != null">
        DBINT_SERVICE_NAME = #{dbintServiceName,jdbcType=VARCHAR},
      </if>
    </set>
    where DBINT_ID = #{dbintId,jdbcType=INTEGER}
  </update>
  <insert id="insert" parameterType="com.dcits.ensemble.om.oms.module.middleware.EcmMidwareDbint">
    insert into ECM_MIDWARE_DBINT
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="dbintId != null">
        DBINT_ID,
      </if>
      <if test="midwareId != null">
        MIDWARE_ID,
      </if>
      <if test="serId != null">
        SER_ID,
      </if>
      <if test="dbintName != null">
        DBINT_NAME,
      </if>
      <if test="dbintDesc != null">
        DBINT_DESC,
      </if>
      <if test="dbintStatus != null">
        DBINT_STATUS,
      </if>
      <if test="dbType != null">
        DB_TYPE,
      </if>
      <if test="dbintNodeNum != null">
        DBINT_NODE_NUM,
      </if>
      <if test="dbintUserName != null">
        DBINT_USER_NAME,
      </if>
      <if test="dbintUserPwd != null">
        DBINT_USER_PWD,
      </if>
      <if test="dbintPort != null">
        DBINT_PORT,
      </if>
      <if test="dbintServiceName != null">
        DBINT_SERVICE_NAME,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="dbintId != null">
        #{dbintId,jdbcType=INTEGER},
      </if>
      <if test="midwareId != null">
        #{midwareId,jdbcType=INTEGER},
      </if>
      <if test="serId != null">
        #{serId,jdbcType=INTEGER},
      </if>
      <if test="dbintName != null">
        #{dbintName,jdbcType=VARCHAR},
      </if>
      <if test="dbintDesc != null">
        #{dbintDesc,jdbcType=VARCHAR},
      </if>
      <if test="dbintStatus != null">
        #{dbintStatus,jdbcType=VARCHAR},
      </if>
      <if test="dbType != null">
        #{dbType,jdbcType=VARCHAR},
      </if>
      <if test="dbintNodeNum != null">
        #{dbintNodeNum,jdbcType=INTEGER},
      </if>
      <if test="dbintUserName != null">
        #{dbintUserName,jdbcType=VARCHAR},
      </if>
      <if test="dbintUserPwd != null">
        #{dbintUserPwd,jdbcType=VARCHAR},
      </if>
      <if test="dbintPort != null">
        #{dbintPort,jdbcType=VARCHAR},
      </if>
      <if test="dbintServiceName != null">
        #{dbintServiceName,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
</mapper>