<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dcits.ensemble.om.oms.dao.app.EcmAppInfoDao">
  <!-- Created by tangxl on 2014/07/21 09:33:16. -->
  <select id="selectByPrimaryKey" parameterType="com.dcits.ensemble.om.oms.module.app.EcmAppInfo" resultType="com.dcits.ensemble.om.oms.module.app.EcmAppInfo">
    select *
    from ecm_app_info
    where APP_ID = #{appId,jdbcType=INTEGER}
  </select>
  <select id="findList" parameterType="com.dcits.galaxy.dal.mybatis.proactor.page.ParameterWrapper" resultType="com.dcits.ensemble.om.oms.module.app.EcmAppInfo">
    select *
    from ecm_app_info 
    order by APP_TYPE
  </select>
  <select id="findMaxVerNumList" parameterType="com.dcits.ensemble.om.oms.module.app.EcmAppInfo" resultType="com.dcits.ensemble.om.oms.module.app.EcmAppInfo">
    select APPINFO.APP_ID,APPINFO.APP_NAME,APPINFO.APP_SIMPEN_NM,APPINFO.APP_DESC,APPINFO.APP_TYPE,APPINFO.APP_PATH,APPINFO.APP_PORT,APPINFO.APP_WORK,MAX(APPVER.APP_VER_NUM) MAX_APP_VER_NUM
    from ecm_app_info APPINFO LEFT JOIN ECM_APP_VER APPVER
    ON APPINFO.APP_ID = APPVER.APP_ID
    GROUP BY APPINFO.APP_ID,APPINFO.APP_NAME,APPINFO.APP_SIMPEN_NM,APPINFO.APP_DESC,APPINFO.APP_TYPE,APPINFO.APP_PATH,APPINFO.APP_PORT,APPINFO.APP_WORK
  </select>
  <select id="findCombList" parameterType="java.util.Map" resultType="com.dcits.ensemble.om.oms.module.app.EcmAppInfo">
    select *   from ecm_app_info    
  </select> 
  <delete id="deleteByPrimaryKey" parameterType="com.dcits.ensemble.om.oms.module.app.EcmAppInfo">
    delete from ecm_app_info
    where APP_ID = #{appId,jdbcType=INTEGER}
  </delete>
  <update id="updateByPrimaryKey" parameterType="com.dcits.ensemble.om.oms.module.app.EcmAppInfo">
    update ecm_app_info
    <set>
      <if test="appName != null">
        APP_NAME = #{appName,jdbcType=VARCHAR},
      </if>
      <if test="appSimpenNm != null">
        APP_SIMPEN_NM = #{appSimpenNm,jdbcType=VARCHAR},
      </if>
      <if test="appDesc != null">
        APP_DESC = #{appDesc,jdbcType=VARCHAR},
      </if>
      <if test="appType != null">
        APP_TYPE = #{appType,jdbcType=VARCHAR},
      </if>
      <if test="appPath != null">
        APP_PATH = #{appPath,jdbcType=VARCHAR},
      </if>
      <if test="appPort != null">
        APP_PORT = #{appPort,jdbcType=VARCHAR},
      </if>
       <if test="midwareRedisId != null">
        MIDWARE_REDIS_ID = #{midwareRedisId,jdbcType=INTEGER},
      </if>
       <if test="midwareZKId != null">
        MIDWARE_ZK_ID = #{midwareZKId,jdbcType=INTEGER},
      </if>
       <if test="midwareDBId != null">
        MIDWARE_DB_ID = #{midwareDBId,jdbcType=INTEGER},
      </if>
      
       <if test="appWork != null">
        APP_WORK = #{appWork,jdbcType=VARCHAR},
      </if>
    </set>
    where APP_ID = #{appId,jdbcType=INTEGER}
  </update>
  <insert id="insert" parameterType="com.dcits.ensemble.om.oms.module.app.EcmAppInfo">
    insert into ecm_app_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="appId != null">
        APP_ID,
      </if>
      <if test="appName != null">
        APP_NAME,
      </if>
       <if test="appSimpenNm != null">
        APP_SIMPEN_NM,
      </if>
      <if test="appDesc != null">
        APP_DESC,
      </if>
      <if test="appType != null">
        APP_TYPE,
      </if>
       <if test="appPath != null">
        APP_PATH,
      </if>
      <if test="appPort != null">
        APP_PORT,
      </if>
      <if test="midwareRedisId != null">
        MIDWARE_REDIS_ID,
      </if><if test="midwareZKId != null">
        MIDWARE_ZK_ID,
      </if><if test="midwareDBId != null">
        MIDWARE_DB_ID,
      </if>
      <if test="appWork != null">
        APP_WORK,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="appId != null">
        #{appId,jdbcType=INTEGER},
      </if>
      <if test="appName != null">
        #{appName,jdbcType=VARCHAR},
      </if>
       <if test="appSimpenNm != null">
        #{appSimpenNm,jdbcType=VARCHAR},
      </if>
      <if test="appDesc != null">
        #{appDesc,jdbcType=VARCHAR},
      </if>
      <if test="appType != null">
        #{appType,jdbcType=VARCHAR},
      </if>
       <if test="appPath != null">
        #{appPath,jdbcType=VARCHAR},
      </if>
      <if test="appPort != null">
        #{appPort,jdbcType=VARCHAR},
      </if>
      
       <if test="midwareRedisId != null">
        #{midwareRedisId,jdbcType=INTEGER},
      </if>
       <if test="midwareZKId != null">
        #{midwareZKId,jdbcType=INTEGER},
      </if>
       <if test="midwareDBId != null">
        #{midwareDBId,jdbcType=INTEGER},
      </if>
      <if test="appWork != null">
        #{appWork,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
</mapper>